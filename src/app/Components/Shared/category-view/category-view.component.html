<div *ngIf="!this.isLoading" class="flex justify-between gap-4 mb-4">
  <div class="text-sm breadcrumbs mb-5">
    <ul>
      <li>
        <a (click)="goHomeCategory()">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-4 h-4 mr-2 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg>
          Home
        </a>
      </li>
      <li *ngFor="let cat of breadCrumbsCats">
        <a (click)="viewCategory(cat.id)">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-4 h-4 mr-2 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg>
          {{cat.name}}
        </a>
      </li>
    </ul>
  </div>
  <div>
    <label *ngIf="this.modelService.canAddNew()" class="btn btn-primary" for="newCatModal">
      <svg class="fill-neutral-content w-5 h-5 mr-2" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 122.88 95.19" style="enable-background:new 0 0 122.88 95.19" xml:space="preserve"><style type="text/css">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style><g><path class="st0" d="M2.49,20.74h4.5v-9.86c0-1.37,1.11-2.48,2.48-2.48h4.41V2.48c0-1.37,1.11-2.48,2.48-2.48h40.26 c1.37,0,2.48,1.11,2.48,2.48V8.4h54.29c1.37,0,2.48,1.11,2.48,2.48v9.86h4.53c1.37,0,2.48,1.11,2.48,2.48 c0,0.18-0.02,0.36-0.06,0.52l-8.68,63.8c-0.28,2.08-1.19,4.01-2.59,5.41c-1.38,1.38-3.21,2.24-5.36,2.24H14.7 c-2.16,0-4.03-0.87-5.43-2.26c-1.41-1.41-2.31-3.35-2.54-5.46L0.01,23.48c-0.14-1.36,0.85-2.58,2.21-2.72 C2.32,20.75,2.4,20.75,2.49,20.74L2.49,20.74L2.49,20.74L2.49,20.74L2.49,20.74z M64.03,70.77c0,0.71-0.29,1.36-0.76,1.83 c-0.46,0.46-1.11,0.75-1.82,0.76h-0.02c-0.71,0-1.36-0.29-1.83-0.76c-0.46-0.46-0.75-1.11-0.76-1.82v-8.7h-8.69 c-0.71,0-1.36-0.29-1.83-0.76c-0.46-0.46-0.75-1.11-0.76-1.82v-0.02c0-0.71,0.29-1.36,0.76-1.83c0.46-0.46,1.11-0.75,1.82-0.76h8.7 v-8.69c0-0.71,0.29-1.36,0.76-1.83c0.46-0.46,1.11-0.75,1.82-0.76h0.02c0.71,0,1.36,0.29,1.83,0.76c0.46,0.46,0.75,1.11,0.76,1.82 v8.7h8.7l0,0c0.71,0,1.36,0.29,1.83,0.76c0.46,0.46,0.75,1.11,0.76,1.82v0.02c0,0.71-0.29,1.36-0.76,1.83 c-0.46,0.46-1.11,0.75-1.82,0.76h-8.71V70.77L64.03,70.77L64.03,70.77z M61.45,32c7.44,0,14.18,3.02,19.06,7.89 c4.88,4.88,7.89,11.61,7.89,19.05c0,7.44-3.02,14.19-7.89,19.06c-4.88,4.88-11.61,7.89-19.06,7.89c-7.44,0-14.18-3.02-19.06-7.89 c-4.88-4.88-7.89-11.61-7.89-19.06c0-7.44,3.02-14.18,7.89-19.05C47.27,35.02,54.01,32,61.45,32L61.45,32L61.45,32z M77.15,43.22 c-4.02-4.02-9.58-6.51-15.71-6.51c-6.14,0-11.69,2.49-15.71,6.51s-6.51,9.58-6.51,15.71c0,6.14,2.49,11.69,6.51,15.71 c4.02,4.02,9.58,6.51,15.71,6.51c6.14,0,11.69-2.49,15.71-6.51s6.51-9.58,6.51-15.71C83.66,52.8,81.18,47.24,77.15,43.22 L77.15,43.22L77.15,43.22z M9.47,25.71H5.24l6.43,61.26c0.1,0.98,0.5,1.85,1.1,2.46c0.5,0.5,1.17,0.81,1.93,0.81l91.49,0 c0.75,0,1.38-0.3,1.87-0.79c0.62-0.62,1.03-1.53,1.17-2.55l8.32-61.18L9.47,25.71L9.47,25.71L9.47,25.71L9.47,25.71z M11.95,13.37 v7.36l98.96-1.05v-6.31H56.62c-1.37,0-2.48-1.11-2.48-2.48V4.97h-35.3v5.92c0,1.37-1.11,2.48-2.48,2.48H11.95L11.95,13.37 L11.95,13.37L11.95,13.37z"/></g></svg>
      <span>Add New Category</span>
    </label>
  </div>
</div>

<!--Add New Modal-->
<input type="checkbox" id="newCatModal" class="modal-toggle" />
<label for="newCatModal" class="modal cursor-pointer">
  <label class="modal-box relative" for="newCatModal">
    <label for="newCatModal" class="btn btn-sm btn-circle btn-error absolute right-2 top-2" (click)="clearNewCategoryForm()">âœ•</label>
    <h3 class="text-lg font-bold mb-4"> Add new Category</h3>

    <div class="grid grid-cols-1 gap-y-4" [formGroup]="newCategoryForm">
      <div *ngIf="this.categoryLoaded && this.actualCategory != null" class="grid grid-cols-1">
        <span>Parent Category: <strong>{{this.actualCategory.name}}</strong></span>
      </div>
      <div class="grid grid-cols-1">
        <label for="cat-name" class="mr-4">Name: </label>
        <input type="text" class="input input-bordered w-full max-w-xs" id="cat-name" placeholder="Enter your category name" formControlName="categoryName">
      </div>
      <div class="grid grid-cols-1">
        <label for="cat-desc" class="mr-4">Description: </label>
        <textarea class="textarea textarea-bordered" placeholder="Enter your category description" id="cat-desc" formControlName="categoryDescription"></textarea>
      </div>
    </div>

    <div class="modal-action">
      <label for="newCatModal" class="btn btn-error" (click)="clearNewCategoryForm()">Cancel</label>
      <label class="btn btn-ghost cursor-not-allowed" *ngIf="!newCategoryForm.valid">Save New Category</label>
      <label for="newCatModal" class="btn btn-secondary" *ngIf="newCategoryForm.valid" (click)="createNewCategory()">Save New Category</label>
    </div>
  </label>
</label>


<div class="grid grid-cols-4 gap-5 mb-5">
  <div *ngFor="let category of categories" class="card card-compact bg-base-100 shadow-xl cursor-pointer">
    <figure><img (click)="viewCategory(category.id)" src="https://picsum.photos/400/150" alt="Shoes" /></figure>
    <div class="card-body">
      <h2 class="card-title">{{category.name}}</h2>
      <p>{{category.description}}</p>
      <div class="card-actions justify-end">
        <button class="btn btn-error" *ngIf="this.modelService.canDelete()" (click)="deleteCategory(category.id)" >Delete</button>
        <button class="btn btn-primary" (click)="viewCategory(category.id)">View</button>
      </div>
    </div>
  </div>

</div>
<app-table-view *ngIf="categoryLoaded" [model]="contentModel" [modelService]="contentModelService" [filter]="contentFilter"></app-table-view>

<div *ngIf="this.isLoading" class="content-center">
  <span class="loading loading-spinner loading-lg text-info"></span>
</div>
